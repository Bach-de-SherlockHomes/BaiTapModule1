<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Co CARO</title>
</head>

<body>

  <pre id="banCo" style="font-size: 20px;"></pre>
  <button onclick="changeViTri(); if (check == 1) {
    check = 0;
  }else { check = 1;} ">Change</button>

  <script>
    let N = +prompt('Nhap N dong')
    let M = +prompt('Nhap M cot')
    let myArray = [];
    let sideArray = [];
    let check = 1;

    const generateMang = () => {
      for (i = 0; i < N; i++) {
        for (j = 0; j < M; j++) {
          sideArray.push('(.)')
        }
        myArray.push(sideArray)
        sideArray = [];
      }
    }
    generateMang();
    console.log(myArray);

    let holder = '';
    const inMangHTML = () => {
      for (i = 0; i < N; i++) {
        for (j = 0; j < M; j++) {
          holder += myArray[i][j] + '  '
        }
        holder += '\n'
        sideArray = [];
      }
      document.getElementById('banCo').innerHTML = holder;
      holder = '';
    }
    inMangHTML();

    const thongbaoWin = () => {
      for (i = 0; i < N; i++) {
        for (j = 0; j < M; j++) {
          if (myArray[i][j]  == 'X' && myArray[i+1][j]  == 'X' && myArray[i+2][j]  == 'X' ){
            alert('X thang')
          }
          if (myArray[i][j]  == 'X' && myArray[i][j+1]  == 'X' && myArray[i][j+2]  == 'X' ){
            alert('X thang')
          }
          if (myArray[i][j]  == 'X' && myArray[i+1][j+1]  == 'X' && myArray[i+2][j+2]  == 'X' ){
            alert('X thang')
          }
          if (myArray[i][j]  == 'X' && myArray[i+1][j-1]  == 'X' && myArray[i+2][j-2]  == 'X' ){
            alert('X thang')
          }
          if (myArray[i][j]  == 'O' && myArray[i+1][j]  == 'O' && myArray[i+2][j]  == 'O' ){
            alert('O thang')
          }
          if (myArray[i][j]  == 'O' && myArray[i][j+1]  == 'O' && myArray[i][j+2]  == 'O' ){
            alert('O thang')
          }
          if (myArray[i][j]  == 'O' && myArray[i+1][j+1]  == 'O' && myArray[i+2][j+2]  == 'O' ){
            alert('O thang')
          }
          if (myArray[i][j]  == 'O' && myArray[i+1][j-1]  == 'O' && myArray[i+2][j-2]  == 'O' ){
            alert('O thang')
          }

        }
      }
    }

    const changeViTri = () => {
      let changeDong = +prompt('Thay doi dong thu:')
      let changeCot = +prompt('Thay doi cot thu:')
      
      if (changeDong <= 0 || changeCot <= 0) {
        alert("Nhap lai")
      } else {
        if (check == 1){
          myArray[changeDong - 1][changeCot - 1] = 'X';
        } else {
          myArray[changeDong - 1][changeCot - 1] = 'O';
        }
        
        inMangHTML();
        thongbaoWin();
      }

    }

  </script>
</body>

</html>